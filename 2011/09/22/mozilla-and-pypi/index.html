<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Alex Clark - Python Web Developer & Musician, Django, Pillow, Plock, Plone, Pyramid and more!">

        <link rel="alternate"  href="http://blog.aclark.net/feeds/all.atom.xml" type="application/atom+xml" title="Alex Clark - Python Web Developer & Musician Full Atom Feed"/>

        <title>Mozilla and PyPI // Alex Clark - Python Web Developer & Musician // Django, Pillow, Plock, Plone, Pyramid and more!</title>

    <link href="https://github.com/pythonpackages/pythonpackages/blob/master/favicon.ico?raw=true" rel="icon">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.3.0/pure-min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://blog.aclark.net/theme/css/pure.css">
    <link rel="stylesheet" href="http://blog.aclark.net/theme/css/pygments.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fitvids/1.0.1/jquery.fitvids.min.js"></script>
    <script>
        $(document).ready(function(){
            $(".content").fitVids();
        });
    </script>

    <script type="text/javascript" src="http://blog.aclark.net/tipuesearch/tipuesearch_set.js"></script>
    <script type="text/javascript" src="http://blog.aclark.net/tipuesearch/tipuesearch_content.js"></script>
    <link rel="stylesheet" type="text/css" href="http://blog.aclark.net/tipuesearch/tipuesearch.css">
    <script type="text/javascript" src="http://blog.aclark.net/tipuesearch/tipuesearch.js"></script>

</head>

<body>
    <div class="pure-g-r" id="layout">
        <div class="sidebar pure-u">
            <div class="cover-img" style="background-image: url('http://aclark.net/static/background.jpg')">
                <div class="cover-body">
                    <header class="header">
                        <hgroup>
                            <img class="avatar" src="http://www.gravatar.com/avatar/6170000a01c67c6ba1e2d4bd87701bae.png">
                            <h1 class="brand-main"><a href="http://blog.aclark.net">Alex Clark - Python Web Developer & Musician</a></h1>
                            <p class="tagline">Django, Pillow, Plock, Plone, Pyramid and more!</p>
                                <p class="social">
                                    <a href="http://aclark.net">
                                        <i class="fa fa-home fa-3x"></i>
                                    </a>
                                    <a href="https://github.com/aclark4life">
                                        <i class="fa fa-github fa-3x"></i>
                                    </a>
                                    <a href="https://www.gittip.com/aclark4life">
                                        <i class="fa fa-gittip fa-3x"></i>
                                    </a>
                                    <a href="http://band.aclark.net">
                                        <i class="fa fa-music fa-3x"></i>
                                    </a>
                                    <a href="https://twitter.com/aclark4life">
                                        <i class="fa fa-twitter-square fa-3x"></i>
                                    </a>
                                    <a href="https://about.me/alex.clark">
                                        <i class="fa fa-user fa-3x"></i>
                                    </a>
                                </p>
                        </hgroup>
                    </header>
                </div>
            </div>
        </div>
        <div id="search" style="letter-spacing: 1px">
            <form action="http://blog.aclark.net">
                <input type="text" name="q" id="tipue_search_input" autocomplete="off" required>
            </form>
            <div id="tipue_search_content" style="padding-left: 55px"></div>
        </div>
    <div class="pure-u">
        <div class="content">
            <section class="post">
                <header class="post-header">
                    <h1>Mozilla and PyPI</h1>
                        <p class="post-meta">
                            // under                                 <a class="post-category" href="http://blog.aclark.net/tag/plone.html">Plone</a>
                                <a class="post-category" href="http://blog.aclark.net/tag/python.html">Python</a>
                        </p>
                </header>
            </section>
            <p>The <a class="reference external" href="http://blog.aclark.net/in-defense-of-pypi">last time I wrote about PyPI</a> some folks mistook the subject to be <a class="reference external" href="http://pypy.org/">PyPy</a>, so let me be clear: this article is about the <a class="reference external" href="http://pypi.python.org/pypi">Python Packaging Index</a>.</p>
<p>I recently began doing some volunteer work for Mozilla[1], working on a <a class="reference external" href="https://github.com/aclark4life/kitsune-vagrant">virtual machine setup</a> to make kitsune development easier (kitsune is the code name for the Django site that powers <a class="reference external" href="http://support.mozilla.com">support.mozilla.com</a>).</p>
<div class="section" id="git-submodules">
<h2>Git submodules</h2>
<p>In doing so, I came across an interesting command from their <a class="reference external" href="https://github.com/jsocol/kitsune/blob/master/docs/installation.rst">installation docs</a>:</p>
<pre class="literal-block">
$ git submodule update --init --recursive
</pre>
<p>I can recall some vague rumblings about git submodules prior to this incident, but nothing I'd call &quot;familiarity&quot;. So, I shrugged it off and went about the business of creating the VM (and resisting the urge to use <a class="reference external" href="http://pypi.python.org/pypi/zc.buildout/1.5.2">zc.buildout</a> to do it):</p>
<ul class="simple">
<li>On day 1, I created a <a class="reference external" href="http://virtualbox.org">VirtualBox</a> VM using the latest Ubuntu Server and was able to assemble and run the application by following the instructions.</li>
<li>On day 2, I began to <a class="reference external" href="http://vagrantup.com">&quot;vagrantize&quot;</a> the process. Here I ran into a bit of trouble with the git-submodule command[2]. This led me to seek alternative methods to install the various Python packages it was trying to install (when stuck on a problem I often like to pursue the alternatives immediately, so I have them if I need them.)</li>
</ul>
</div>
<div class="section" id="zamboni">
<h2>Zamboni</h2>
<p>Then, in the Mozilla IRC channel #sumodev (<strong>su</strong>pport <strong>mo</strong>zilla) some nice Mozillian (willkg) pointed me to this gem:</p>
<ul class="simple">
<li><a class="reference external" href="http://mozweb.readthedocs.org/en/latest/packaging.html">http://mozweb.readthedocs.org/en/latest/packaging.html</a></li>
</ul>
<p>Which in turn led me to the following two links:</p>
<ul class="simple">
<li><a class="reference external" href="http://jbalogh.github.com/zamboni/topics/packages/">http://jbalogh.github.com/zamboni/topics/packages/</a></li>
<li><a class="reference external" href="http://playdoh.readthedocs.org/en/latest/packages.html#packages">http://playdoh.readthedocs.org/en/latest/packages.html#packages</a></li>
</ul>
<p>Again, faint rumblings… this time about zamboni (not THAT Zamboni). I know I've heard of it, but I wouldn't call myself familiar with it. So, I innocently read the following:</p>
<blockquote>
<strong>Python projects can incur a number of dependencies. ``pip`` can be handy, but we’ve had better luck with distributing a ``vendor`` library.</strong></blockquote>
<p>At which point I immediately thought to myself:</p>
<blockquote>
<strong>Yeah… I hear that.</strong></blockquote>
<p>Followed a few seconds later by:</p>
<blockquote>
<strong>Wait… what?!?</strong></blockquote>
</div>
<div class="section" id="playdoh">
<h2>Playdoh</h2>
<p>Some time/research later[3], I (re)discovered that zamboni is the codename for <a class="reference external" href="https://addons.mozilla.org">addons.mozilla.org</a>[4]. And <a class="reference external" href="http://playdoh.readthedocs.org/">Playdoh</a> is the code name for Mozilla's base Django project setup. If you aren't familiar with Playdoh, please do give it a whirl[5].</p>
</div>
<div class="section" id="pypi">
<h2>PyPI</h2>
<p>While all of this is very, very interesting to me, I am primarily a &quot;systems and processes&quot; guy; and what ultimately stuck with me after two days of Mozilla-ing is the following blurb from the Playdoh packaging documentation:</p>
<blockquote>
<strong>The ``/vendor`` library is supposed to contain all packages and repositories. It enables the project to be deployed as one package onto many machines, without relying on PyPI-based installations on each target machine.</strong></blockquote>
<p>&quot;Nooooooooooooooo&quot;, I am now saying to myself over and over. &quot;Without relying on PyPI-based installations on each target machine.&quot; Another &quot;noooooooooooooooo!&quot; :-) I certainly don't fault Mozilla for taking this approach, but it makes me sad that large organizations like Mozilla are passing over PyPI in favor of alternative methods of distributing Python software.</p>
<p>Let us all now hang our heads, for a moment of pause and reflection.</p>
<p><em>[a minute passes]</em></p>
</div>
<div class="section" id="the-future">
<h2>The future</h2>
<p>I can't speak for anyone else, but I would certainly like to see this change in the future. I would LOVE to see PyPI become a place that Mozilla felt confident it could use to deploy Python software. And this is something I'd love to work on <em>for</em> Mozilla, if given the opportunity[6].</p>
<div class="section" id="great-for-python-great-for-mozilla">
<h3>Great for Python == great for Mozilla?</h3>
<p>It's obvious what's in it for Python, but what's in for Mozilla?</p>
<p>Simple.</p>
<p>I happen to share Mozilla's vision for an open web and open source in general. And it's great to see them embracing &amp; using Python for their web projects! Without a doubt,&nbsp; they are interested in giving back to the Python community (e.g. via Playdoh and the Django community, in this case.) So I suspect they'd be open to helping the Python community fix a long standing issue: the stability and reliability of the Python Package Index. It would certainly benefit them in the long run to simplify their build process to the point where git-submodule was no longer needed[7].</p>
</div>
</div>
<div class="section" id="notes">
<h2>Notes</h2>
<p>[1] I am actively courting Mozilla in hopes of landing a gig by the end of the year. So all you Mozillians who know me personally, please put in a good word! And all you Mozillians I have not met yet: nice to meet you! :-)</p>
<p>[2] The problem turned out to be git-submodule failing to run because things like: grep and sed were missing from the PATH. Easily fixed by modifying the puppet configuration, but not easily discovered because git-submodule itself returned zero! Some guy on #puppet was very helpful in getting me to print out debug info.</p>
<p>[3] More help from friendly Mozillians in #webdev:</p>
<blockquote>
11:13 &lt; groovecoder&gt; aclark: yeah, zamboni is amo 11:13 &lt; kumar&gt; playdoh was extracted from zamboni and other apps 11:13 &lt; kumar&gt; but zamboni itself does not eat the playdoh dog food, actually 11:15 &lt; kumar&gt; aclark also, in case you're not steeped in our initialisms, amo is addons.mozilla.org</blockquote>
<p>[4] There is a great presentation about it here: <a class="reference external" href="http://www.slideshare.net/andymckay/anatomy-of-a-large-django-site-7590098">http://www.slideshare.net/andymckay/anatomy-of-a-large-django-site-7590098</a>.)</p>
<p>[5] More from kumar (emphasis is my own):</p>
<blockquote>
11:25 &lt; kumar&gt; <strong>Playdoh is starting to stabilize</strong> so it would be <strong>good to see some use of it outside Mozilla</strong>; this would probably help us catch Mozilla-specific things that need extraction</blockquote>
<p>[6] LARGE HINT ;-)</p>
<p>[7] Again, not that there is anything wrong with what Mozilla is doing here. As a systems guy, I just happen to gravitate toward simplifying processes by eliminating steps.</p>
</div>

            <a href="#" class="go-top">Go Top</a>
    <div class="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = "aclark-blog"; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
<footer class="footer">
    <p>&copy; Alex Clark &ndash;
        Built with <a href="https://github.com/PurePelicanTheme/pure-single">Pure Theme</a>
        for <a href="http://blog.getpelican.com/">Pelican</a>
    </p>
</footer>        </div>
    </div>
    </div>
    <script>
        var $top = $('.go-top');

        // Show or hide the sticky footer button
        $(window).scroll(function() {
            if ($(this).scrollTop() > 200) {
                $top.fadeIn(200);
            } else {
                $top.fadeOut(200);
            }
        });

        // Animate the scroll to top
        $top.click(function(event) {
            event.preventDefault();
            $('html, body').animate({scrollTop: 0}, 300);
        })

        // Makes sure that the href="#" attached to the <a> elements
        // don't scroll you back up the page.
        $('body').on('click', 'a[href="#"]', function(event) {
            event.preventDefault();
        });
    </script>
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try {
            var pageTracker = _gat._getTracker("UA-34988446-1");
            pageTracker._trackPageview();
            } catch(err) {}
    </script>


    <script>
    $(document).ready(function() {
         $('#tipue_search_input').tipuesearch({
              'show': 6,
              'mode': 'json',
              'contentLocation': 'tipuesearch_content.json'
         });
    });
    </script>

</body>
</html>